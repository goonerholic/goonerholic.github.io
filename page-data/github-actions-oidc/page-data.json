{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/github-actions-oidc","result":{"data":{"mdx":{"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"tag\": [\"aws\", \"github actions\", \"oidc\"],\n  \"title\": \"Github actions에서 OIDC를 이용한 AWS 배포관리\",\n  \"slug\": \"github-actions-oidc\",\n  \"date\": \"2022-07-27T15:00:00.000Z\",\n  \"excerpt\": \"Access key/secret없이 안전하게 배포를 자동화하자\",\n  \"image\": \"../images/openid-r-logo-900x360.png\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h2\", null, \"Access key, Secret \\uBC29\\uC2DD\\uC758 \\uBB38\\uC81C\\uC810\"), mdx(\"p\", null, \"Github actions workflow\\uB97C \\uD65C\\uC6A9\\uD574\\uC11C \\uD14C\\uC2A4\\uD2B8/\\uBC30\\uD3EC \\uB4F1\\uC744 \\uAD00\\uB9AC\\uD558\\uB294 \\uACBD\\uC6B0 \\uD544\\uC218\\uC801\\uC73C\\uB85C \\uD074\\uB77C\\uC6B0\\uB4DC \\uC11C\\uBE44\\uC2A4(AWS, GCP, Azure\\uAC19\\uC740) \\uC811\\uADFC\\uAD8C\\uD55C\\uC774 \\uD544\\uC694\\uD558\\uB2E4.\"), mdx(\"p\", null, \"\\uC774 \\uB54C \\uC77C\\uBC18\\uC801\\uC73C\\uB85C \\uD074\\uB77C\\uC6B0\\uB4DC provider\\uAC00 \\uC81C\\uACF5\\uD558\\uB294 \\uD328\\uC2A4\\uC6CC\\uB4DC\\uB098 \\uD1A0\\uD070\\uC744 \\uC774\\uC6A9\\uD558\\uB294\\uB370 \\uBCF4\\uD1B5 github secret\\uC5D0 \\uC9C1\\uC811 \\uAC12\\uC744 \\uC800\\uC7A5\\uD558\\uACE0 workflow\\uC5D0\\uC11C \\uC800\\uC7A5\\uB41C \\uAC12\\uC744 \\uC774\\uC6A9\\uD574 \\uBC30\\uD3EC \\uCEE4\\uB9E8\\uB4DC\\uB97C \\uC2E4\\uD589\\uD558\\uB294 \\uD615\\uD0DC\\uB85C \\uD65C\\uC6A9\\uD55C\\uB2E4.\"), mdx(\"p\", null, \"\\uADF8\\uB7F0\\uB370 \\uC77C\\uB2E8 \\uBC30\\uD3EC\\uC5D0 \\uD544\\uC694\\uD55C \\uAD8C\\uD55C \\uC774\\uC0C1\\uC73C\\uB85C \\uC124\\uC815\\uB41C IAM User\\uC758 credential\\uC744 \\uC800\\uC7A5\\uC18C\\uC5D0 \\uBCF5\\uC0AC\\uD574\\uC11C \\uB2F4\\uC544\\uB193\\uB294\\uAC83\\uC758 \\uCC1D\\uCC1D\\uD568\\uC740 \\uB458\\uC9F8\\uCE58\\uACE0 \\uC77C\\uB2E8 \\uAC12\\uC744 \\uBCF5\\uC0AC\\uD574\\uC11C \\uC800\\uC7A5\\uC18C\\uC5D0 \\uB123\\uC5B4\\uB193\\uB294 \\uACFC\\uC815 \\uC790\\uCCB4\\uAC00 \\uADC0\\uCC2E\\uB2E4. \\uAC70\\uAE30\\uB2E4 credential \\uC815\\uBCF4\\uAC00 \\uD138\\uB9AC\\uBA74 \\uC9C1\\uC811 revoke\\uD558\\uAE30 \\uC804\\uAE4C\\uC9C4 \\uB9E4\\uC6B0 \\uC704\\uD5D8\\uD55C \\uC0C1\\uD669\\uC5D0 \\uB193\\uC774\\uAC8C \\uB41C\\uB2E4.(Admin \\uAD8C\\uD55C\\uC774\\uBA74 \\uC7AC\\uC559)\"), mdx(\"h2\", null, \"OpenID Connect(OIDC)\\uAC00 \\uBB50\\uC784?\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"OpenID Connect\\uB780 OAuth 2.0 framework\\uB97C \\uAE30\\uBC18\\uC73C\\uB85C \\uB9CC\\uB4E4\\uC5B4\\uC9C4 identity layer\\uC774\\uB2E4. Third party application\\uC774 \\uC0AC\\uC6A9\\uC790\\uC758 identity\\uB97C \\uAC80\\uC99D\\uD558\\uACE0 \\uD504\\uB85C\\uD544 \\uC815\\uBCF4\\uB97C \\uC5BB\\uB294\\uB370 \\uD65C\\uC6A9\\uD55C\\uB2E4.\")), mdx(\"p\", null, \"\\uC790\\uC138\\uD55C\\uAC74 \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://openid.net/connect/\"\n  }), \"\\uC5EC\\uAE30\")), mdx(\"p\", null, \"\\uC5B4\\uCA0C\\uB4E0 github\\uC5D0\\uC11C cloud provider\\uC5D0\\uAC8C \\uC811\\uADFC \\uAD8C\\uD55C\\uC744 \\uC694\\uCCAD\\uD558\\uBA74 \\uC9E7\\uC740 \\uAE30\\uAC04\\uB3D9\\uC548\\uB9CC \\uC720\\uD6A8\\uD55C \\uD1A0\\uD070\\uC744 \\uBC1C\\uAE09\\uD574\\uC8FC\\uACE0 \\uD574\\uB2F9 \\uD1A0\\uD070\\uC744 \\uC774\\uC6A9\\uD574 \\uBC30\\uD3EC\\uC5D0 \\uD544\\uC694\\uD55C \\uC790\\uC6D0\\uC5D0 \\uC811\\uADFC\\uD558\\uB294 \\uBC29\\uC2DD\\uC774\\uB2E4.\"), mdx(\"p\", null, \"job\\uC774 \\uB05D\\uB09C \\uC774\\uD6C4\\uC5D4 \\uC790\\uB3D9\\uC73C\\uB85C \\uD1A0\\uD070\\uC774 \\uB9CC\\uB8CC\\uB418\\uAE30 \\uB54C\\uBB38\\uC5D0 access key\\uB97C \\uC9C1\\uC811 \\uC800\\uC7A5\\uC18C\\uC5D0 \\uBCF4\\uAD00\\uD558\\uB294 \\uBC29\\uC2DD\\uBCF4\\uB2E4 \\uD6E8\\uC52C \\uC548\\uC804\\uD558\\uB2E4.\"), mdx(\"h2\", null, \"\\uC124\\uC815\\uC740 \\uC5B4\\uB5BB\\uAC8C?\"), mdx(\"h3\", null, \"Provider \\uC124\\uC815\"), mdx(\"p\", null, \"AWS\\uB97C \\uAE30\\uC900\\uC73C\\uB85C \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://docs.github.com/en/actions/deployment/security-hardening-your-deployments/configuring-openid-connect-in-amazon-web-services\"\n  }), \"\\uC5EC\\uAE30\"), \"\\uC5D0 \\uC790\\uC138\\uD788 \\uC798 \\uC124\\uBA85\\uB418\\uC5B4 \\uC788\\uB2E4.\"), mdx(\"p\", null, \"\\uBA3C\\uC800 Identity provider\\uB97C \\uC124\\uC815\\uD574\\uC8FC\\uC5B4\\uC57C \\uD55C\\uB2E4.\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"\\uC6B0\\uC120 IAM - Identity providers \\uBA54\\uB274\\uC5D0\\uC11C \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Add provider\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"provider URL, Audience\\uC5D0 \\uAC01\\uAC01 \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"https://token.actions.githubusercontent.com\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"sts.amazonaws.com\"), \" \\uC785\\uB825\")), mdx(\"p\", null, \"\\uB2E4\\uC74C\\uC73C\\uB85C \\uC544\\uB798\\uC640 \\uAC19\\uC774 Role\\uC744 \\uC124\\uC815\\uD574\\uC900\\uB2E4.\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"IAM > Roles \\uBA54\\uB274\\uC5D0\\uC11C \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Create role\"), \" \\uBC84\\uD2BC \\uD074\\uB9AD\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Trusted entity type\"), \" \\uC911 \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Web identity\"), \"\\uB97C \\uC120\\uD0DD\\uD558\\uACE0 \\uC544\\uB798\\uC758 \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"identity provider\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Audience\"), \"\\uC5D0 \\uC704\\uC5D0\\uC11C \\uB4F1\\uB85D\\uD55C \\uAC12\\uC744 \\uC120\\uD0DD\\uD558\\uACE0 \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Next\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"\\uB2E4\\uC74C \\uB2E8\\uACC4\\uC5D0\\uC11C \\uBC30\\uD3EC\\uC5D0 \\uD544\\uC694\\uD55C \\uAD8C\\uD55C\\uC744 \\uCD94\\uAC00(s3, cloudfront \\uB4F1)\")), mdx(\"p\", null, \"\\uC774\\uC81C aws\\uC5D0\\uC11C\\uC758 \\uC124\\uC815\\uC740 \\uB05D\\uC774\\uB0AC\\uACE0 github action\\uC5D0 \\uC124\\uC815\\uC744 \\uCD94\\uAC00\\uD574\\uC8FC\\uC5B4\\uC57C \\uD55C\\uB2E4.\"), mdx(\"h3\", null, \"Github Actions \\uC124\\uC815\"), mdx(\"p\", null, \"\\uC544\\uB798\\uC758 \\uB450\\uAC00\\uC9C0 \\uC124\\uC815\\uC744 workflow yaml\\uC5D0 \\uCD94\\uAC00\\uD574\\uC8FC\\uC5B4\\uC57C \\uD55C\\uB2E4.\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"token\\uC5D0 \\uB300\\uD55C permission \\uCD94\\uAC00\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"aws-actions/configure-aws-credentials\"), \" \\uC561\\uC158 \\uAD00\\uB828 \\uC124\\uC815\")), mdx(\"p\", null, \"\\uB300\\uCDA9 \\uC544\\uB798\\uC640 \\uAC19\\uC740 \\uD615\\uD0DC\\uB85C yaml\\uD30C\\uC77C\\uC744 \\uC124\\uC815\\uD574\\uC8FC\\uBA74 \\uB41C\\uB2E4\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yaml\"\n  }), \"# Sample workflow to access AWS resources when workflow is tied to branch\\n# The workflow Creates static website using aws s3\\nname: AWS example workflow\\non:\\n  push\\nenv:\\n  BUCKET_NAME : \\\"<example-bucket-name>\\\"\\n  AWS_REGION : \\\"<example-aws-region>\\\"\\n# permission can be added at job level or workflow level    \\npermissions:\\n      id-token: write\\n      contents: read    # This is required for actions/checkout\\njobs:\\n  S3PackageUpload:\\n    runs-on: ubuntu-latest\\n    steps:\\n      - name: Git clone the repository\\n        uses: actions/checkout@v3\\n      - name: configure aws credentials\\n        uses: aws-actions/configure-aws-credentials@v1\\n        with:\\n          role-to-assume: arn:aws:iam::1234567890:role/example-role\\n          role-session-name: samplerolesession\\n          aws-region: ${{ env.AWS_REGION }}\\n      # Upload a file to AWS s3\\n      - name:  Copy index.html to s3\\n        run: |\\n          aws s3 cp ./index.html s3://${{ env.BUCKET_NAME }}/\\n\")), mdx(\"p\", null, \"\\uC774\\uC81C \\uC800\\uC7A5\\uC18C\\uC5D0 access key\\uC640 secret\\uC744 \\uC800\\uC7A5\\uD574\\uB450\\uC9C0 \\uC54A\\uACE0\\uB3C4 \\uD504\\uB85C\\uC81D\\uD2B8\\uB97C \\uC790\\uB3D9\\uC73C\\uB85C \\uBC30\\uD3EC\\uD560 \\uC218 \\uC788\\uAC8C \\uB418\\uC5C8\\uB2E4.\"));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"date":"2022-07-27T15:00:00.000Z","excerpt":"Access key/secret없이 안전하게 배포를 자동화하자","slug":"github-actions-oidc","title":"Github actions에서 OIDC를 이용한 AWS 배포관리"}}},"pageContext":{"id":"d17a7b81-d7c9-566d-b4bd-5338b468d051"}},"staticQueryHashes":["3159585216","63159454"]}